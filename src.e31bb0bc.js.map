{"version":3,"sources":["../public/data.json","constants/index.js","views/list.js","views/details.js","views/not-found.js","views/index.js","controllers/details.js","controllers/list.js","controllers/not-found.js","controllers/index.js","router.js","../node_modules/on-change/lib/constants.js","../node_modules/on-change/lib/is-builtin.js","../node_modules/on-change/lib/is-array.js","../node_modules/on-change/lib/is-symbol.js","../node_modules/on-change/lib/path.js","../node_modules/on-change/lib/is-iterator.js","../node_modules/on-change/lib/wrap-iterator.js","../node_modules/on-change/lib/ignore-property.js","../node_modules/on-change/lib/cache.js","../node_modules/on-change/lib/is-object.js","../node_modules/on-change/lib/smart-clone/diff/is-diff-certain.js","../node_modules/on-change/lib/smart-clone/diff/is-diff-arrays.js","../node_modules/on-change/lib/smart-clone/methods/object.js","../node_modules/on-change/lib/smart-clone/methods/array.js","../node_modules/on-change/lib/smart-clone/diff/is-diff-sets.js","../node_modules/on-change/lib/smart-clone/methods/set.js","../node_modules/on-change/lib/smart-clone/diff/is-diff-maps.js","../node_modules/on-change/lib/smart-clone/methods/map.js","../node_modules/on-change/lib/smart-clone/clone/clone-object.js","../node_modules/on-change/lib/smart-clone/clone/clone-array.js","../node_modules/on-change/lib/smart-clone/clone/clone-date.js","../node_modules/on-change/lib/smart-clone/clone/clone-set.js","../node_modules/on-change/lib/smart-clone/clone/clone-map.js","../node_modules/on-change/lib/smart-clone/clone/clone-weakset.js","../node_modules/on-change/lib/smart-clone/clone/clone-weakmap.js","../node_modules/on-change/lib/smart-clone/smart-clone.js","../node_modules/on-change/index.js","watcher.js","repository/index.js","index.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["module","exports","PAGES","LIST","DETAILS","NOT_FOUND","MAX_PERSON_IN_SUBLIST","renderPerson","person","id","name","renderView","markup","join","renderListView","contacts","container","document","querySelector","personsMarkup","map","innerHTML","getRenderPerson","contactsDictionary","personId","value","friends","notFriends","popular","renderDetailsView","rankedPersonsByFriends","renderNotFound","handleArrowClick","state","page","addDetailsHandlers","arrow","onArrowClick","addEventListener","removeEventListener","handlePersonClick","evt","target","dataset","currentPersonId","Number","addListHandlers","persons","onPersonClick","addNotFoundHandlers","beforeUnmount","PATH_SEPARATOR","TARGET","Symbol","UNSUBSCRIBE","isBuiltinWithMutableMethods","Date","Set","Map","WeakSet","WeakMap","ArrayBuffer","isView","isBuiltinWithoutMutableMethods","RegExp","Array","isArray","isSymbol","path","after","subPath","slice","length","concat","key","push","toString","undefined","initial","index","lastIndexOf","last","walk","callback","position","indexOf","get","object","isIterator","next","wrapIterator","iterator","thisArg","applyPath","prepareValue","originalNext","result","call","done","keyIterator","keys","ignoreProperty","cache","options","property","isUnsubscribed","ignoreSymbols","ignoreUnderscores","charAt","ignoreKeys","includes","Cache","equals","_equals","_proxyCache","_pathCache","_descriptorCache","descriptorCache","_getDescriptorCache","properties","set","Reflect","getOwnPropertyDescriptor","_getProperties","descriptor","handler","proxyTarget","reflectTarget","source","proxy","Proxy","Object","is","getPath","defineProperty","receiver","previous","_getOwnPropertyDescriptor","deleteProperty","delete","a","b","writable","enumerable","configurable","isObject","isDiffCertain","isDiffArrays","clone","some","item","IMMUTABLE_OBJECT_METHODS","IMMUTABLE_ARRAY_METHODS","MUTABLE_ARRAY_METHODS","pop","shift","unshift","copyWithin","reverse","sort","splice","flat","fill","HANDLED_ARRAY_METHODS","isDiffSets","size","element","has","COLLECTION_ITERATOR_METHODS","IMMUTABLE_SET_METHODS","MUTABLE_SET_METHODS","add","clear","forEach","HANDLED_SET_METHODS","isDiffMaps","bValue","aValue","IMMUTABLE_MAP_METHODS","MUTABLE_MAP_METHODS","HANDLED_MAP_METHODS","CloneObject","argumentsList","hasOnValidate","_path","_isChanged","_clonedCache","_hasOnValidate","_changes","_shallowClone","entries","isHandledMethod","thisProxyTarget","_onIsChanged","fullPath","changePath","change","CloneArray","CloneDate","setTime","getTime","valueOf","CloneSet","CloneMap","CloneWeakSet","_arg1","_weakValue","CloneWeakMap","_weakKey","_weakHas","weakHas","SmartClone","_stack","CloneClass","update","preferredThisArg","isMutable","isChanged","_previousClone","undo","defaultOptions","isShallow","pathAsArray","ignoreDetached","details","onChange","onValidate","smartClone","validate","applyData","isCloning","handleChangeOnTarget","isDetached","handleChange","getProxyTarget","basePath","isGetInvariant","getProxy","unsubscribe","isValid","setProperty","isSameDescriptor","apply","isHandledType","start","argument","stop","args","bind","Repository","data","_data","count","filter","friendsIds","groupedByRepeat","reduce","acc","firstId","firstCount","secondId","secondCount","compare","firstName","secondName","localeCompare","countInSublist","_getNotFriends","_getRankedPersonsByFriends","repository","getContactsData","initialState","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","getParents","modules","parents","k","d","dep","Function","deps","cached","cb"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"..\\src","sourcesContent":["module.exports = [\n    {\n        \"id\": 1,\n        \"name\": \"Петя\",\n        \"friends\": [10,2,6]\n    },\n    {\n        \"id\": 2,\n        \"name\": \"Вася\",\n        \"friends\": [5,1,3]\n    },\n    {\n        \"id\": 3,\n        \"name\": \"Оля\",\n        \"friends\": [9,4,3]\n    },\n    {\n        \"id\": 4,\n        \"name\": \"Максим\",\n        \"friends\": [11,12,2]\n    },\n    {\n        \"id\": 5,\n        \"name\": \"Елена\",\n        \"friends\": [7,8,4]\n    },\n    {\n        \"id\": 6,\n        \"name\": \"Иван\",\n        \"friends\": [6,1,12]\n    },\n    {\n        \"id\": 7,\n        \"name\": \"Никита\",\n        \"friends\": [1,8,5]\n    },\n    {\n        \"id\": 8,\n        \"name\": \"Марат\",\n        \"friends\": [11,12,10]\n    },\n    {\n        \"id\": 9,\n        \"name\": \"Анатолий\",\n        \"friends\": [1,2,3]\n    },\n    {\n        \"id\": 10,\n        \"name\": \"Наташа\",\n        \"friends\": [8,4,2]\n    },\n    {\n        \"id\": 11,\n        \"name\": \"Марина\",\n        \"friends\": [1,5,8]\n    },\n    {\n        \"id\": 12,\n        \"name\": \"Кирилл\",\n        \"friends\": [5,2,12]\n    }\n];","export const PAGES = {\n  LIST: 'list',\n  DETAILS: 'details',\n  NOT_FOUND: 'not-found',\n};\n\nexport const MAX_PERSON_IN_SUBLIST = 3;\n","const renderPerson = (person) => `\n    <li class=\"persons__item\" data-id=${person.id}>\n        <strong>${person.name}</strong>\n    </li>\n`;\n\nconst renderView = (markup) => `\n    <div class=\"list-view\">\n        <div class=\"background\"></div>\n        <ul class=\"persons\">\n            ${markup.join('')}\n        </ul>\n    </div>\n`;\n\nexport const renderListView = ({ contacts }) => {\n  const container = document.querySelector('.container');\n  const personsMarkup = contacts.map(renderPerson);\n\n  container.innerHTML = renderView(personsMarkup);\n};\n","const getRenderPerson = (contactsDictionary) => (personId) => {\n  const value = contactsDictionary[personId];\n\n  if (!value) {\n    return '';\n  }\n\n  return `\n    <li class=\"contacts__item\"}>\n        <i class=\"fa fa-male contacts__icon\"></i>\n        <span>${value.name}</span>\n    </li>\n`;\n};\n\nconst renderView = ({\n  name, friends, notFriends, popular,\n}) => `\n    <div class=\"details-view\">\n        <div class=\"background details__background\">\n          <div class=\"arrow details__arrow\"></div>\n          <div class=\"avatar details__avatar\"></div>\n          <div class=\"details__name\">${name}</div>\n        </div>\n        <ul class=\"contacts\">\n            <li class=\"contacts__item contacts__item_title\">Друзья</li>\n            ${friends.join('')}\n            <li class=\"contacts__item contacts__item_title\">Не в друзьях</li>\n            ${notFriends.join('')}\n            <li class=\"contacts__item contacts__item_title\">Популярные люди</li>\n            ${popular.join('')}\n        </ul>\n    </div>\n`;\n\nexport const renderDetailsView = ({ person, contactsDictionary, rankedPersonsByFriends }) => {\n  const container = document.querySelector('.container');\n\n  const renderPerson = getRenderPerson(contactsDictionary);\n  const friends = person.friends.map(renderPerson);\n  const notFriends = person.notFriends.map(renderPerson);\n  const popular = rankedPersonsByFriends.map(renderPerson);\n\n  container.innerHTML = renderView({\n    name: person.name, friends, notFriends, popular,\n  });\n};\n","const renderView = () => `\n    <div class=\"notfound-view\">\n        <div class=\"background\">\n            <div class=\"arrow\"></div>\n        </div>\n        <p class=\"notfound__text\">Ничего не найдено</p>\n    </div>\n`;\n\nexport const renderNotFound = () => {\n  const container = document.querySelector('.container');\n\n  container.innerHTML = renderView();\n};\n","export { renderListView } from './list';\nexport { renderDetailsView } from './details';\nexport { renderNotFound } from './not-found';\n","import { PAGES } from '../constants';\n\nconst handleArrowClick = (state) => () => {\n  state.page = PAGES.LIST;\n};\n\nexport const addDetailsHandlers = (state) => {\n  const arrow = document.querySelector('.arrow');\n\n  const onArrowClick = handleArrowClick(state);\n  arrow.addEventListener('click', onArrowClick);\n\n  return () => {\n    arrow.removeEventListener('click', onArrowClick);\n  };\n};\n","import { PAGES } from '../constants';\n\nconst handlePersonClick = (state) => (evt) => {\n  if (!evt.target.dataset.id) {\n    return;\n  }\n\n  state.currentPersonId = Number(evt.target.dataset.id);\n  state.page = PAGES.DETAILS;\n};\n\nexport const addListHandlers = (state) => {\n  const persons = document.querySelector('.persons');\n\n  const onPersonClick = handlePersonClick(state);\n  persons.addEventListener('click', onPersonClick);\n\n  return () => {\n    persons.removeEventListener('click', onPersonClick);\n  };\n};\n","import { PAGES } from '../constants';\n\nconst handleArrowClick = (state) => () => {\n  state.page = PAGES.LIST;\n};\n\nexport const addNotFoundHandlers = (state) => {\n  const arrow = document.querySelector('.arrow');\n\n  const onArrowClick = handleArrowClick(state);\n  arrow.addEventListener('click', onArrowClick);\n\n  return () => {\n    arrow.removeEventListener('click', onArrowClick);\n  };\n};\n","export { addDetailsHandlers } from './details';\nexport { addListHandlers } from './list';\nexport { addNotFoundHandlers } from './not-found';\n","import { PAGES } from './constants';\n\nimport { renderListView, renderDetailsView, renderNotFound } from './views';\nimport { addListHandlers, addDetailsHandlers, addNotFoundHandlers } from './controllers';\n\nlet beforeUnmount = () => {};\n\nexport default (state) => {\n  const { page } = state;\n\n  beforeUnmount();\n\n  if (page === PAGES.LIST) {\n    renderListView(state);\n    beforeUnmount = addListHandlers(state);\n    return;\n  }\n\n  if (page === PAGES.DETAILS) {\n    const person = state.contactsDictionary[state.currentPersonId];\n\n    if (person) {\n      renderDetailsView({ ...state, person });\n      beforeUnmount = addDetailsHandlers(state);\n      return;\n    }\n  }\n\n  renderNotFound();\n  beforeUnmount = addNotFoundHandlers(state);\n};\n","export const PATH_SEPARATOR = '.';\nexport const TARGET = Symbol('target');\nexport const UNSUBSCRIBE = Symbol('unsubscribe');\n","export function isBuiltinWithMutableMethods(value) {\n\treturn value instanceof Date\n\t\t|| value instanceof Set\n\t\t|| value instanceof Map\n\t\t|| value instanceof WeakSet\n\t\t|| value instanceof WeakMap\n\t\t|| ArrayBuffer.isView(value);\n}\n\nexport function isBuiltinWithoutMutableMethods(value) {\n\treturn (typeof value === 'object' ? value === null : typeof value !== 'function') || value instanceof RegExp;\n}\n","export default Array.isArray;\n","export default function isSymbol(value) {\n\treturn typeof value === 'symbol';\n}\n","import {PATH_SEPARATOR} from './constants.js';\nimport isArray from './is-array.js';\nimport isSymbol from './is-symbol.js';\n\nconst path = {\n\tafter: (path, subPath) => {\n\t\tif (isArray(path)) {\n\t\t\treturn path.slice(subPath.length);\n\t\t}\n\n\t\tif (subPath === '') {\n\t\t\treturn path;\n\t\t}\n\n\t\treturn path.slice(subPath.length + 1);\n\t},\n\tconcat: (path, key) => {\n\t\tif (isArray(path)) {\n\t\t\tpath = [...path];\n\n\t\t\tif (key) {\n\t\t\t\tpath.push(key);\n\t\t\t}\n\n\t\t\treturn path;\n\t\t}\n\n\t\tif (key && key.toString !== undefined) {\n\t\t\tif (path !== '') {\n\t\t\t\tpath += PATH_SEPARATOR;\n\t\t\t}\n\n\t\t\tif (isSymbol(key)) {\n\t\t\t\treturn path + key.toString();\n\t\t\t}\n\n\t\t\treturn path + key;\n\t\t}\n\n\t\treturn path;\n\t},\n\tinitial: path => {\n\t\tif (isArray(path)) {\n\t\t\treturn path.slice(0, -1);\n\t\t}\n\n\t\tif (path === '') {\n\t\t\treturn path;\n\t\t}\n\n\t\tconst index = path.lastIndexOf(PATH_SEPARATOR);\n\n\t\tif (index === -1) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn path.slice(0, index);\n\t},\n\tlast: path => {\n\t\tif (isArray(path)) {\n\t\t\treturn path[path.length - 1] || '';\n\t\t}\n\n\t\tif (path === '') {\n\t\t\treturn path;\n\t\t}\n\n\t\tconst index = path.lastIndexOf(PATH_SEPARATOR);\n\n\t\tif (index === -1) {\n\t\t\treturn path;\n\t\t}\n\n\t\treturn path.slice(index + 1);\n\t},\n\twalk: (path, callback) => {\n\t\tif (isArray(path)) {\n\t\t\tfor (const key of path) {\n\t\t\t\tcallback(key);\n\t\t\t}\n\t\t} else if (path !== '') {\n\t\t\tlet position = 0;\n\t\t\tlet index = path.indexOf(PATH_SEPARATOR);\n\n\t\t\tif (index === -1) {\n\t\t\t\tcallback(path);\n\t\t\t} else {\n\t\t\t\twhile (position < path.length) {\n\t\t\t\t\tif (index === -1) {\n\t\t\t\t\t\tindex = path.length;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(path.slice(position, index));\n\n\t\t\t\t\tposition = index + 1;\n\t\t\t\t\tindex = path.indexOf(PATH_SEPARATOR, position);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tget(object, path) {\n\t\tthis.walk(path, key => {\n\t\t\tif (object) {\n\t\t\t\tobject = object[key];\n\t\t\t}\n\t\t});\n\n\t\treturn object;\n\t},\n};\n\nexport default path;\n","export default function isIterator(value) {\n\treturn typeof value === 'object' && typeof value.next === 'function';\n}\n","import {TARGET} from './constants.js';\n\n// eslint-disable-next-line max-params\nexport default function wrapIterator(iterator, target, thisArg, applyPath, prepareValue) {\n\tconst originalNext = iterator.next;\n\n\tif (target.name === 'entries') {\n\t\titerator.next = function () {\n\t\t\tconst result = originalNext.call(this);\n\n\t\t\tif (result.done === false) {\n\t\t\t\tresult.value[0] = prepareValue(\n\t\t\t\t\tresult.value[0],\n\t\t\t\t\ttarget,\n\t\t\t\t\tresult.value[0],\n\t\t\t\t\tapplyPath,\n\t\t\t\t);\n\t\t\t\tresult.value[1] = prepareValue(\n\t\t\t\t\tresult.value[1],\n\t\t\t\t\ttarget,\n\t\t\t\t\tresult.value[0],\n\t\t\t\t\tapplyPath,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t} else if (target.name === 'values') {\n\t\tconst keyIterator = thisArg[TARGET].keys();\n\n\t\titerator.next = function () {\n\t\t\tconst result = originalNext.call(this);\n\n\t\t\tif (result.done === false) {\n\t\t\t\tresult.value = prepareValue(\n\t\t\t\t\tresult.value,\n\t\t\t\t\ttarget,\n\t\t\t\t\tkeyIterator.next().value,\n\t\t\t\t\tapplyPath,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t} else {\n\t\titerator.next = function () {\n\t\t\tconst result = originalNext.call(this);\n\n\t\t\tif (result.done === false) {\n\t\t\t\tresult.value = prepareValue(\n\t\t\t\t\tresult.value,\n\t\t\t\t\ttarget,\n\t\t\t\t\tresult.value,\n\t\t\t\t\tapplyPath,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t}\n\n\treturn iterator;\n}\n","import isSymbol from './is-symbol.js';\n\nexport default function ignoreProperty(cache, options, property) {\n\treturn cache.isUnsubscribed\n\t\t|| (options.ignoreSymbols && isSymbol(property))\n\t\t|| (options.ignoreUnderscores && property.charAt(0) === '_')\n\t\t|| ('ignoreKeys' in options && options.ignoreKeys.includes(property));\n}\n","import path from './path.js';\n\n/**\n@class Cache\n@private\n*/\nexport default class Cache {\n\tconstructor(equals) {\n\t\tthis._equals = equals;\n\t\tthis._proxyCache = new WeakMap();\n\t\tthis._pathCache = new WeakMap();\n\t\tthis.isUnsubscribed = false;\n\t}\n\n\t_getDescriptorCache() {\n\t\tif (this._descriptorCache === undefined) {\n\t\t\tthis._descriptorCache = new WeakMap();\n\t\t}\n\n\t\treturn this._descriptorCache;\n\t}\n\n\t_getProperties(target) {\n\t\tconst descriptorCache = this._getDescriptorCache();\n\t\tlet properties = descriptorCache.get(target);\n\n\t\tif (properties === undefined) {\n\t\t\tproperties = {};\n\t\t\tdescriptorCache.set(target, properties);\n\t\t}\n\n\t\treturn properties;\n\t}\n\n\t_getOwnPropertyDescriptor(target, property) {\n\t\tif (this.isUnsubscribed) {\n\t\t\treturn Reflect.getOwnPropertyDescriptor(target, property);\n\t\t}\n\n\t\tconst properties = this._getProperties(target);\n\t\tlet descriptor = properties[property];\n\n\t\tif (descriptor === undefined) {\n\t\t\tdescriptor = Reflect.getOwnPropertyDescriptor(target, property);\n\t\t\tproperties[property] = descriptor;\n\t\t}\n\n\t\treturn descriptor;\n\t}\n\n\tgetProxy(target, path, handler, proxyTarget) {\n\t\tif (this.isUnsubscribed) {\n\t\t\treturn target;\n\t\t}\n\n\t\tconst reflectTarget = target[proxyTarget];\n\t\tconst source = reflectTarget || target;\n\n\t\tthis._pathCache.set(source, path);\n\n\t\tlet proxy = this._proxyCache.get(source);\n\n\t\tif (proxy === undefined) {\n\t\t\tproxy = reflectTarget === undefined\n\t\t\t\t? new Proxy(target, handler)\n\t\t\t\t: target;\n\n\t\t\tthis._proxyCache.set(source, proxy);\n\t\t}\n\n\t\treturn proxy;\n\t}\n\n\tgetPath(target) {\n\t\treturn this.isUnsubscribed ? undefined : this._pathCache.get(target);\n\t}\n\n\tisDetached(target, object) {\n\t\treturn !Object.is(target, path.get(object, this.getPath(target)));\n\t}\n\n\tdefineProperty(target, property, descriptor) {\n\t\tif (!Reflect.defineProperty(target, property, descriptor)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.isUnsubscribed) {\n\t\t\tthis._getProperties(target)[property] = descriptor;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tsetProperty(target, property, value, receiver, previous) { // eslint-disable-line max-params\n\t\tif (!this._equals(previous, value) || !(property in target)) {\n\t\t\tconst descriptor = this._getOwnPropertyDescriptor(target, property);\n\n\t\t\tif (descriptor !== undefined && 'set' in descriptor) {\n\t\t\t\treturn Reflect.set(target, property, value, receiver);\n\t\t\t}\n\n\t\t\treturn Reflect.set(target, property, value);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdeleteProperty(target, property, previous) {\n\t\tif (Reflect.deleteProperty(target, property)) {\n\t\t\tif (!this.isUnsubscribed) {\n\t\t\t\tconst properties = this._getDescriptorCache().get(target);\n\n\t\t\t\tif (properties) {\n\t\t\t\t\tdelete properties[property];\n\t\t\t\t\tthis._pathCache.delete(previous);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisSameDescriptor(a, target, property) {\n\t\tconst b = this._getOwnPropertyDescriptor(target, property);\n\n\t\treturn a !== undefined\n\t\t\t&& b !== undefined\n\t\t\t&& Object.is(a.value, b.value)\n\t\t\t&& (a.writable || false) === (b.writable || false)\n\t\t\t&& (a.enumerable || false) === (b.enumerable || false)\n\t\t\t&& (a.configurable || false) === (b.configurable || false)\n\t\t\t&& a.get === b.get\n\t\t\t&& a.set === b.set;\n\t}\n\n\tisGetInvariant(target, property) {\n\t\tconst descriptor = this._getOwnPropertyDescriptor(target, property);\n\n\t\treturn descriptor !== undefined\n\t\t\t&& descriptor.configurable !== true\n\t\t\t&& descriptor.writable !== true;\n\t}\n\n\tunsubscribe() {\n\t\tthis._descriptorCache = null;\n\t\tthis._pathCache = null;\n\t\tthis._proxyCache = null;\n\t\tthis.isUnsubscribed = true;\n\t}\n}\n","export default function isObject(value) {\n\treturn toString.call(value) === '[object Object]';\n}\n","export default function isDiffCertain() {\n\treturn true;\n}\n","export default function isDiffArrays(clone, value) {\n\treturn clone.length !== value.length || clone.some((item, index) => value[index] !== item);\n}\n","export const IMMUTABLE_OBJECT_METHODS = new Set([\n\t'hasOwnProperty',\n\t'isPrototypeOf',\n\t'propertyIsEnumerable',\n\t'toLocaleString',\n\t'toString',\n\t'valueOf',\n]);\n","import isDiffCertain from '../diff/is-diff-certain.js';\nimport isDiffArrays from '../diff/is-diff-arrays.js';\nimport {IMMUTABLE_OBJECT_METHODS} from './object.js';\n\nconst IMMUTABLE_ARRAY_METHODS = new Set([\n\t'concat',\n\t'includes',\n\t'indexOf',\n\t'join',\n\t'keys',\n\t'lastIndexOf',\n]);\n\nexport const MUTABLE_ARRAY_METHODS = {\n\tpush: isDiffCertain,\n\tpop: isDiffCertain,\n\tshift: isDiffCertain,\n\tunshift: isDiffCertain,\n\tcopyWithin: isDiffArrays,\n\treverse: isDiffArrays,\n\tsort: isDiffArrays,\n\tsplice: isDiffArrays,\n\tflat: isDiffArrays,\n\tfill: isDiffArrays,\n};\n\nexport const HANDLED_ARRAY_METHODS = new Set([\n\t...IMMUTABLE_OBJECT_METHODS,\n\t...IMMUTABLE_ARRAY_METHODS,\n\t...Object.keys(MUTABLE_ARRAY_METHODS),\n]);\n","export default function isDiffSets(clone, value) {\n\tif (clone.size !== value.size) {\n\t\treturn true;\n\t}\n\n\tfor (const element of clone) {\n\t\tif (!value.has(element)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n","import isDiffSets from '../diff/is-diff-sets.js';\n\nexport const COLLECTION_ITERATOR_METHODS = [\n\t'keys',\n\t'values',\n\t'entries',\n];\n\nexport const IMMUTABLE_SET_METHODS = new Set([\n\t'has',\n\t'toString',\n]);\n\nexport const MUTABLE_SET_METHODS = {\n\tadd: isDiffSets,\n\tclear: isDiffSets,\n\tdelete: isDiffSets,\n\tforEach: isDiffSets,\n};\n\nexport const HANDLED_SET_METHODS = new Set([\n\t...IMMUTABLE_SET_METHODS,\n\t...Object.keys(MUTABLE_SET_METHODS),\n\t...COLLECTION_ITERATOR_METHODS,\n]);\n","export default function isDiffMaps(clone, value) {\n\tif (clone.size !== value.size) {\n\t\treturn true;\n\t}\n\n\tlet bValue;\n\tfor (const [key, aValue] of clone) {\n\t\tbValue = value.get(key);\n\n\t\tif (bValue !== aValue || (bValue === undefined && !value.has(key))) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n","import isDiffMaps from '../diff/is-diff-maps.js';\nimport {IMMUTABLE_SET_METHODS, COLLECTION_ITERATOR_METHODS} from './set.js';\n\nconst IMMUTABLE_MAP_METHODS = new Set([...IMMUTABLE_SET_METHODS, 'get']);\n\nexport const MUTABLE_MAP_METHODS = {\n\tset: isDiffMaps,\n\tclear: isDiffMaps,\n\tdelete: isDiffMaps,\n\tforEach: isDiffMaps,\n};\n\nexport const HANDLED_MAP_METHODS = new Set([\n\t...IMMUTABLE_MAP_METHODS,\n\t...Object.keys(MUTABLE_MAP_METHODS),\n\t...COLLECTION_ITERATOR_METHODS,\n]);\n","import path from '../../path.js';\nimport isArray from '../../is-array.js';\nimport isObject from '../../is-object.js';\nimport {MUTABLE_ARRAY_METHODS} from '../methods/array.js';\nimport {MUTABLE_SET_METHODS} from '../methods/set.js';\nimport {MUTABLE_MAP_METHODS} from '../methods/map.js';\nimport {IMMUTABLE_OBJECT_METHODS} from '../methods/object.js';\n\nexport default class CloneObject {\n\tconstructor(value, path, argumentsList, hasOnValidate) {\n\t\tthis._path = path;\n\t\tthis._isChanged = false;\n\t\tthis._clonedCache = new Set();\n\t\tthis._hasOnValidate = hasOnValidate;\n\t\tthis._changes = hasOnValidate ? [] : null;\n\n\t\tthis.clone = path === undefined ? value : this._shallowClone(value);\n\t}\n\n\tstatic isHandledMethod(name) {\n\t\treturn IMMUTABLE_OBJECT_METHODS.has(name);\n\t}\n\n\t_shallowClone(value) {\n\t\tlet clone = value;\n\n\t\tif (isObject(value)) {\n\t\t\tclone = {...value};\n\t\t} else if (isArray(value)) {\n\t\t\tclone = [...value];\n\t\t} else if (value instanceof Date) {\n\t\t\tclone = new Date(value);\n\t\t} else if (value instanceof Set) {\n\t\t\tclone = new Set([...value].map(item => this._shallowClone(item)));\n\t\t} else if (value instanceof Map) {\n\t\t\tclone = new Map();\n\n\t\t\tfor (const [key, item] of value.entries()) {\n\t\t\t\tclone.set(key, this._shallowClone(item));\n\t\t\t}\n\t\t}\n\n\t\tthis._clonedCache.add(clone);\n\n\t\treturn clone;\n\t}\n\n\tpreferredThisArg(isHandledMethod, name, thisArg, thisProxyTarget) {\n\t\tif (isHandledMethod) {\n\t\t\tif (isArray(thisProxyTarget)) {\n\t\t\t\tthis._onIsChanged = MUTABLE_ARRAY_METHODS[name];\n\t\t\t} else if (thisProxyTarget instanceof Set) {\n\t\t\t\tthis._onIsChanged = MUTABLE_SET_METHODS[name];\n\t\t\t} else if (thisProxyTarget instanceof Map) {\n\t\t\t\tthis._onIsChanged = MUTABLE_MAP_METHODS[name];\n\t\t\t}\n\n\t\t\treturn thisProxyTarget;\n\t\t}\n\n\t\treturn thisArg;\n\t}\n\n\tupdate(fullPath, property, value) {\n\t\tconst changePath = path.after(fullPath, this._path);\n\n\t\tif (property !== 'length') {\n\t\t\tlet object = this.clone;\n\n\t\t\tpath.walk(changePath, key => {\n\t\t\t\tif (object && object[key]) {\n\t\t\t\t\tif (!this._clonedCache.has(object[key])) {\n\t\t\t\t\t\tobject[key] = this._shallowClone(object[key]);\n\t\t\t\t\t}\n\n\t\t\t\t\tobject = object[key];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (this._hasOnValidate) {\n\t\t\t\tthis._changes.push({\n\t\t\t\t\tpath: changePath,\n\t\t\t\t\tproperty,\n\t\t\t\t\tprevious: value,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (object && object[property]) {\n\t\t\t\tobject[property] = value;\n\t\t\t}\n\t\t}\n\n\t\tthis._isChanged = true;\n\t}\n\n\tundo(object) {\n\t\tlet change;\n\n\t\tfor (let index = this._changes.length - 1; index !== -1; index--) {\n\t\t\tchange = this._changes[index];\n\n\t\t\tpath.get(object, change.path)[change.property] = change.previous;\n\t\t}\n\t}\n\n\tisChanged(value) {\n\t\treturn this._onIsChanged === undefined\n\t\t\t? this._isChanged\n\t\t\t: this._onIsChanged(this.clone, value);\n\t}\n}\n","import {HANDLED_ARRAY_METHODS} from '../methods/array.js';\nimport CloneObject from './clone-object.js';\n\nexport default class CloneArray extends CloneObject {\n\tstatic isHandledMethod(name) {\n\t\treturn HANDLED_ARRAY_METHODS.has(name);\n\t}\n}\n","import CloneObject from './clone-object.js';\n\nexport default class CloneDate extends CloneObject {\n\tundo(object) {\n\t\tobject.setTime(this.clone.getTime());\n\t}\n\n\tisChanged(value, equals) {\n\t\treturn !equals(this.clone.valueOf(), value.valueOf());\n\t}\n}\n","import {HANDLED_SET_METHODS} from '../methods/set.js';\nimport CloneObject from './clone-object.js';\n\nexport default class CloneSet extends CloneObject {\n\tstatic isHandledMethod(name) {\n\t\treturn HANDLED_SET_METHODS.has(name);\n\t}\n\n\tundo(object) {\n\t\tfor (const value of this.clone) {\n\t\t\tobject.add(value);\n\t\t}\n\n\t\tfor (const value of object) {\n\t\t\tif (!this.clone.has(value)) {\n\t\t\t\tobject.delete(value);\n\t\t\t}\n\t\t}\n\t}\n}\n\n","import {HANDLED_MAP_METHODS} from '../methods/map.js';\nimport CloneObject from './clone-object.js';\n\nexport default class CloneMap extends CloneObject {\n\tstatic isHandledMethod(name) {\n\t\treturn HANDLED_MAP_METHODS.has(name);\n\t}\n\n\tundo(object) {\n\t\tfor (const [key, value] of this.clone.entries()) {\n\t\t\tobject.set(key, value);\n\t\t}\n\n\t\tfor (const key of object.keys()) {\n\t\t\tif (!this.clone.has(key)) {\n\t\t\t\tobject.delete(key);\n\t\t\t}\n\t\t}\n\t}\n}\n","import CloneObject from './clone-object.js';\n\nexport default class CloneWeakSet extends CloneObject {\n\tconstructor(value, path, argumentsList, hasOnValidate) {\n\t\tsuper(undefined, path, argumentsList, hasOnValidate);\n\n\t\tthis._arg1 = argumentsList[0];\n\t\tthis._weakValue = value.has(this._arg1);\n\t}\n\n\tisChanged(value) {\n\t\treturn this._weakValue !== value.has(this._arg1);\n\t}\n\n\tundo(object) {\n\t\tif (this._weakValue && !object.has(this._arg1)) {\n\t\t\tobject.add(this._arg1);\n\t\t} else {\n\t\t\tobject.delete(this._arg1);\n\t\t}\n\t}\n}\n\n","import CloneObject from './clone-object.js';\n\nexport default class CloneWeakMap extends CloneObject {\n\tconstructor(value, path, argumentsList, hasOnValidate) {\n\t\tsuper(undefined, path, argumentsList, hasOnValidate);\n\n\t\tthis._weakKey = argumentsList[0];\n\t\tthis._weakHas = value.has(this._weakKey);\n\t\tthis._weakValue = value.get(this._weakKey);\n\t}\n\n\tisChanged(value) {\n\t\treturn this._weakValue !== value.get(this._weakKey);\n\t}\n\n\tundo(object) {\n\t\tconst weakHas = object.has(this._weakKey);\n\n\t\tif (this._weakHas && !weakHas) {\n\t\t\tobject.set(this._weakKey, this._weakValue);\n\t\t} else if (!this._weakHas && weakHas) {\n\t\t\tobject.delete(this._weakKey);\n\t\t} else if (this._weakValue !== object.get(this._weakKey)) {\n\t\t\tobject.set(this._weakKey, this._weakValue);\n\t\t}\n\t}\n}\n","import isArray from '../is-array.js';\nimport {isBuiltinWithMutableMethods} from '../is-builtin.js';\nimport isObject from '../is-object.js';\nimport CloneObject from './clone/clone-object.js';\nimport CloneArray from './clone/clone-array.js';\nimport CloneDate from './clone/clone-date.js';\nimport CloneSet from './clone/clone-set.js';\nimport CloneMap from './clone/clone-map.js';\nimport CloneWeakSet from './clone/clone-weakset.js';\nimport CloneWeakMap from './clone/clone-weakmap.js';\n\nexport default class SmartClone {\n\tconstructor(hasOnValidate) {\n\t\tthis._stack = [];\n\t\tthis._hasOnValidate = hasOnValidate;\n\t}\n\n\tstatic isHandledType(value) {\n\t\treturn isObject(value)\n\t\t\t|| isArray(value)\n\t\t\t|| isBuiltinWithMutableMethods(value);\n\t}\n\n\tstatic isHandledMethod(target, name) {\n\t\tif (isObject(target)) {\n\t\t\treturn CloneObject.isHandledMethod(name);\n\t\t}\n\n\t\tif (isArray(target)) {\n\t\t\treturn CloneArray.isHandledMethod(name);\n\t\t}\n\n\t\tif (target instanceof Set) {\n\t\t\treturn CloneSet.isHandledMethod(name);\n\t\t}\n\n\t\tif (target instanceof Map) {\n\t\t\treturn CloneMap.isHandledMethod(name);\n\t\t}\n\n\t\treturn isBuiltinWithMutableMethods(target);\n\t}\n\n\tget isCloning() {\n\t\treturn this._stack.length > 0;\n\t}\n\n\tstart(value, path, argumentsList) {\n\t\tlet CloneClass = CloneObject;\n\n\t\tif (isArray(value)) {\n\t\t\tCloneClass = CloneArray;\n\t\t} else if (value instanceof Date) {\n\t\t\tCloneClass = CloneDate;\n\t\t} else if (value instanceof Set) {\n\t\t\tCloneClass = CloneSet;\n\t\t} else if (value instanceof Map) {\n\t\t\tCloneClass = CloneMap;\n\t\t} else if (value instanceof WeakSet) {\n\t\t\tCloneClass = CloneWeakSet;\n\t\t} else if (value instanceof WeakMap) {\n\t\t\tCloneClass = CloneWeakMap;\n\t\t}\n\n\t\tthis._stack.push(new CloneClass(value, path, argumentsList, this._hasOnValidate));\n\t}\n\n\tupdate(fullPath, property, value) {\n\t\tthis._stack[this._stack.length - 1].update(fullPath, property, value);\n\t}\n\n\tpreferredThisArg(target, thisArg, thisProxyTarget) {\n\t\tconst {name} = target;\n\t\tconst isHandledMethod = SmartClone.isHandledMethod(thisProxyTarget, name);\n\n\t\treturn this._stack[this._stack.length - 1]\n\t\t\t.preferredThisArg(isHandledMethod, name, thisArg, thisProxyTarget);\n\t}\n\n\tisChanged(isMutable, value, equals) {\n\t\treturn this._stack[this._stack.length - 1].isChanged(isMutable, value, equals);\n\t}\n\n\tundo(object) {\n\t\tif (this._previousClone !== undefined) {\n\t\t\tthis._previousClone.undo(object);\n\t\t}\n\t}\n\n\tstop() {\n\t\tthis._previousClone = this._stack.pop();\n\n\t\treturn this._previousClone.clone;\n\t}\n}\n","/* eslint-disable unicorn/prefer-spread */\nimport {TARGET, UNSUBSCRIBE} from './lib/constants.js';\nimport {isBuiltinWithMutableMethods, isBuiltinWithoutMutableMethods} from './lib/is-builtin.js';\nimport path from './lib/path.js';\nimport isSymbol from './lib/is-symbol.js';\nimport isIterator from './lib/is-iterator.js';\nimport wrapIterator from './lib/wrap-iterator.js';\nimport ignoreProperty from './lib/ignore-property.js';\nimport Cache from './lib/cache.js';\nimport SmartClone from './lib/smart-clone/smart-clone.js';\n\nconst defaultOptions = {\n\tequals: Object.is,\n\tisShallow: false,\n\tpathAsArray: false,\n\tignoreSymbols: false,\n\tignoreUnderscores: false,\n\tignoreDetached: false,\n\tdetails: false,\n};\n\nconst onChange = (object, onChange, options = {}) => {\n\toptions = {\n\t\t...defaultOptions,\n\t\t...options,\n\t};\n\n\tconst proxyTarget = Symbol('ProxyTarget');\n\tconst {equals, isShallow, ignoreDetached, details} = options;\n\tconst cache = new Cache(equals);\n\tconst hasOnValidate = typeof options.onValidate === 'function';\n\tconst smartClone = new SmartClone(hasOnValidate);\n\n\t// eslint-disable-next-line max-params\n\tconst validate = (target, property, value, previous, applyData) => !hasOnValidate\n\t\t|| smartClone.isCloning\n\t\t|| options.onValidate(path.concat(cache.getPath(target), property), value, previous, applyData) === true;\n\n\tconst handleChangeOnTarget = (target, property, value, previous) => {\n\t\tif (\n\t\t\t!ignoreProperty(cache, options, property)\n\t\t\t&& !(ignoreDetached && cache.isDetached(target, object))\n\t\t) {\n\t\t\thandleChange(cache.getPath(target), property, value, previous);\n\t\t}\n\t};\n\n\t// eslint-disable-next-line max-params\n\tconst handleChange = (changePath, property, value, previous, applyData) => {\n\t\tif (smartClone.isCloning) {\n\t\t\tsmartClone.update(changePath, property, previous);\n\t\t} else {\n\t\t\tonChange(path.concat(changePath, property), value, previous, applyData);\n\t\t}\n\t};\n\n\tconst getProxyTarget = value => value\n\t\t? (value[proxyTarget] || value)\n\t\t: value;\n\n\tconst prepareValue = (value, target, property, basePath) => {\n\t\tif (\n\t\t\tisBuiltinWithoutMutableMethods(value)\n\t\t\t|| property === 'constructor'\n\t\t\t|| (isShallow && !SmartClone.isHandledMethod(target, property))\n\t\t\t|| ignoreProperty(cache, options, property)\n\t\t\t|| cache.isGetInvariant(target, property)\n\t\t\t|| (ignoreDetached && cache.isDetached(target, object))\n\t\t) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (basePath === undefined) {\n\t\t\tbasePath = cache.getPath(target);\n\t\t}\n\n\t\treturn cache.getProxy(value, path.concat(basePath, property), handler, proxyTarget);\n\t};\n\n\tconst handler = {\n\t\tget(target, property, receiver) {\n\t\t\tif (isSymbol(property)) {\n\t\t\t\tif (property === proxyTarget || property === TARGET) {\n\t\t\t\t\treturn target;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tproperty === UNSUBSCRIBE\n\t\t\t\t\t&& !cache.isUnsubscribed\n\t\t\t\t\t&& cache.getPath(target).length === 0\n\t\t\t\t) {\n\t\t\t\t\tcache.unsubscribe();\n\t\t\t\t\treturn target;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst value = isBuiltinWithMutableMethods(target)\n\t\t\t\t? Reflect.get(target, property)\n\t\t\t\t: Reflect.get(target, property, receiver);\n\n\t\t\treturn prepareValue(value, target, property);\n\t\t},\n\n\t\tset(target, property, value, receiver) {\n\t\t\tvalue = getProxyTarget(value);\n\n\t\t\tconst reflectTarget = target[proxyTarget] || target;\n\t\t\tconst previous = reflectTarget[property];\n\n\t\t\tif (equals(previous, value) && property in target) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst isValid = validate(target, property, value, previous);\n\n\t\t\tif (\n\t\t\t\tisValid\n\t\t\t\t&& cache.setProperty(reflectTarget, property, value, receiver, previous)\n\t\t\t) {\n\t\t\t\thandleChangeOnTarget(target, property, target[property], previous);\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn !isValid;\n\t\t},\n\n\t\tdefineProperty(target, property, descriptor) {\n\t\t\tif (!cache.isSameDescriptor(descriptor, target, property)) {\n\t\t\t\tconst previous = target[property];\n\n\t\t\t\tif (\n\t\t\t\t\tvalidate(target, property, descriptor.value, previous)\n\t\t\t\t\t&& cache.defineProperty(target, property, descriptor, previous)\n\t\t\t\t) {\n\t\t\t\t\thandleChangeOnTarget(target, property, descriptor.value, previous);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tdeleteProperty(target, property) {\n\t\t\tif (!Reflect.has(target, property)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst previous = Reflect.get(target, property);\n\t\t\tconst isValid = validate(target, property, undefined, previous);\n\n\t\t\tif (\n\t\t\t\tisValid\n\t\t\t\t&& cache.deleteProperty(target, property, previous)\n\t\t\t) {\n\t\t\t\thandleChangeOnTarget(target, property, undefined, previous);\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn !isValid;\n\t\t},\n\n\t\tapply(target, thisArg, argumentsList) {\n\t\t\tconst thisProxyTarget = thisArg[proxyTarget] || thisArg;\n\n\t\t\tif (cache.isUnsubscribed) {\n\t\t\t\treturn Reflect.apply(target, thisProxyTarget, argumentsList);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t(details === false\n\t\t\t\t\t|| (details !== true && !details.includes(target.name)))\n\t\t\t\t&& SmartClone.isHandledType(thisProxyTarget)\n\t\t\t) {\n\t\t\t\tlet applyPath = path.initial(cache.getPath(target));\n\t\t\t\tconst isHandledMethod = SmartClone.isHandledMethod(thisProxyTarget, target.name);\n\n\t\t\t\tsmartClone.start(thisProxyTarget, applyPath, argumentsList);\n\n\t\t\t\tlet result = Reflect.apply(\n\t\t\t\t\ttarget,\n\t\t\t\t\tsmartClone.preferredThisArg(target, thisArg, thisProxyTarget),\n\t\t\t\t\tisHandledMethod\n\t\t\t\t\t\t? argumentsList.map(argument => getProxyTarget(argument))\n\t\t\t\t\t\t: argumentsList,\n\t\t\t\t);\n\n\t\t\t\tconst isChanged = smartClone.isChanged(thisProxyTarget, equals);\n\t\t\t\tconst previous = smartClone.stop();\n\n\t\t\t\tif (SmartClone.isHandledType(result) && isHandledMethod) {\n\t\t\t\t\tif (thisArg instanceof Map && target.name === 'get') {\n\t\t\t\t\t\tapplyPath = path.concat(applyPath, argumentsList[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = cache.getProxy(result, applyPath, handler);\n\t\t\t\t}\n\n\t\t\t\tif (isChanged) {\n\t\t\t\t\tconst applyData = {\n\t\t\t\t\t\tname: target.name,\n\t\t\t\t\t\targs: argumentsList,\n\t\t\t\t\t\tresult,\n\t\t\t\t\t};\n\t\t\t\t\tconst changePath = smartClone.isCloning\n\t\t\t\t\t\t? path.initial(applyPath)\n\t\t\t\t\t\t: applyPath;\n\t\t\t\t\tconst property = smartClone.isCloning\n\t\t\t\t\t\t? path.last(applyPath)\n\t\t\t\t\t\t: '';\n\n\t\t\t\t\tif (validate(path.get(object, changePath), property, thisProxyTarget, previous, applyData)) {\n\t\t\t\t\t\thandleChange(changePath, property, thisProxyTarget, previous, applyData);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsmartClone.undo(thisProxyTarget);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(thisArg instanceof Map || thisArg instanceof Set)\n\t\t\t\t\t&& isIterator(result)\n\t\t\t\t) {\n\t\t\t\t\treturn wrapIterator(result, target, thisArg, applyPath, prepareValue);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\treturn Reflect.apply(target, thisArg, argumentsList);\n\t\t},\n\t};\n\n\tconst proxy = cache.getProxy(object, options.pathAsArray ? [] : '', handler);\n\tonChange = onChange.bind(proxy);\n\n\tif (hasOnValidate) {\n\t\toptions.onValidate = options.onValidate.bind(proxy); // eslint-disable-line unicorn/prefer-prototype-methods\n\t}\n\n\treturn proxy;\n};\n\nonChange.target = proxy => (proxy && proxy[TARGET]) || proxy;\nonChange.unsubscribe = proxy => proxy[UNSUBSCRIBE] || proxy;\n\nexport default onChange;\n","import onChange from 'on-change';\n\nimport router from './router';\n\nexport default (state) => onChange(state, function handler() {\n  router(this);\n});\n","export class Repository {\n  constructor(data) {\n    this._data = data;\n  }\n\n  _getNotFriends(personId, count) {\n    const result = [];\n\n    for (const person of this._data) {\n      const notFriends = person.friends.filter(item => item !== personId);\n      result.push(...notFriends)\n\n      if (result.length >= count) {\n        return result.length > count ? result.slice(0, count) : result;\n      }\n    };\n  }\n\n  _getRankedPersonsByFriends(contactsDictionary, friendsIds, count) {\n    const groupedByRepeat = friendsIds.reduce((acc, id) => {\n      acc[id] = (acc[id] || 0) + 1;\n      return acc;\n    }, {});\n\n    return Object.entries(groupedByRepeat)\n      .sort(([firstId, firstCount], [secondId, secondCount]) => {\n        const compare = secondCount - firstCount;\n\n        if (compare) {\n          return compare;\n        }\n\n        const firstName = contactsDictionary[firstId]?.name || '';\n        const secondName = contactsDictionary[secondId]?.name || '';\n\n        return firstName.localeCompare(secondName);\n\n      })\n      .slice(0, count)\n      .map(([id]) => id);\n  }\n\n  getContactsData(countInSublist) {\n    const friendsIds = [];\n\n    const contactsDictionary = this._data.reduce((acc, person) => {\n      acc[person.id] = {\n        ...person, notFriends: this._getNotFriends(person.id, countInSublist)\n      };\n\n      friendsIds.push(...person.friends)\n\n      return acc;\n    }, {});\n\n    return {\n      contacts: this._data,\n      contactsDictionary,\n      rankedPersonsByFriends: this._getRankedPersonsByFriends(contactsDictionary, friendsIds, countInSublist)\n    }\n  }\n}\n","import data from '../public/data.json';\n\nimport { MAX_PERSON_IN_SUBLIST, PAGES } from './constants';\n\nimport router from './router';\nimport watcher from './watcher';\nimport { Repository } from './repository';\n\nconst repository = new Repository(data);\n\nconst {\n  contacts,\n  contactsDictionary,\n  rankedPersonsByFriends,\n} = repository.getContactsData(MAX_PERSON_IN_SUBLIST);\n\nconst initialState = {\n  page: PAGES.LIST,\n  currentPersonId: null,\n  contacts,\n  contactsDictionary,\n  rankedPersonsByFriends,\n};\n\nconst state = watcher(initialState);\n\nrouter(state);\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}